<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mrkb.dao.dao.WithdrawalApplyMapper">
  <insert id="insertWithdrawalApply" parameterType="com.mrkb.dao.modle.apply.WithdrawalApplyEntity" useGeneratedKeys="true" keyProperty="withdrawal_apply_id">
   INSERT INTO withdrawal_apply (
   user_basics_id,
   apply_add_date,
   edit_user_basics_id,
   apply_value,
   apply_receipt_type,
   apply_receipt_supplement,
   apply_status,
   apply_edit_date,
   apply_type,
   apply_explain,
   edit_notes
   )VALUE(
   #{user_basics_id,jdbcType=INTEGER},
   #{apply_add_date,jdbcType=INTEGER},
   #{edit_user_basics_id,jdbcType=INTEGER},
   #{apply_value,jdbcType=DOUBLE},
   #{apply_receipt_type,jdbcType=INTEGER},
   #{apply_receipt_supplement,jdbcType=INTEGER},
   #{apply_status,jdbcType=INTEGER},
   #{apply_edit_date,jdbcType=INTEGER},
   #{apply_type,jdbcType=INTEGER},
   #{apply_explain,jdbcType=VARCHAR},
   #{edit_notes,jdbcType=VARCHAR}
  )
  </insert>
  <update id="updateWithdrawalApply" parameterType="int">
  UPDATE withdrawal_apply set 
  	user_basics_id=#{user_basics_id,jdbcType=INTEGER}
  	<if test="apply_status!=null">,apply_status=#{apply_status,jdbcType=INTEGER}</if>
  	<if test="apply_edit_date!=null">,apply_edit_date=#{apply_edit_date,jdbcType=BIGINT}</if>
  	<if test="edit_user_basics_id!=null">,edit_user_basics_id=#{edit_user_basics_id,jdbcType=INTEGER}</if>
  WHERE 1=1 
  and withdrawal_apply_id=#{withdrawal_apply_id,jdbcType=INTEGER}
  and user_basics_id=#{user_basics_id,jdbcType=INTEGER}
  </update>
  <select id="selectWithdrawalApplyToId" parameterType="int" resultType="com.mrkb.dao.modle.apply.WithdrawalApplyEntity">
  SELECT withdrawal_apply_id,user_basics_id,apply_add_date,edit_user_basics_id,apply_value,
  apply_receipt_type,apply_receipt_supplement,apply_status,apply_edit_date,apply_type,apply_explain,
  edit_notes FROM withdrawal_apply
  WHERE withdrawal_apply_id=#{withdrawal_apply_id,jdbcType=INTEGER}
  </select>
  <select id="selectWithdrawalApplyToApplyStatus" parameterType="int" resultType="com.mrkb.dao.modle.apply.WithdrawalApplyEntity">
  SELECT a.withdrawal_apply_id,a.user_basics_id,a.apply_add_date,a.edit_user_basics_id,a.apply_value,
  a.apply_receipt_type,a.apply_receipt_supplement,a.apply_status,a.apply_edit_date,a.apply_type,a.apply_explain,
  a.edit_notes,b.information_compellation
   FROM withdrawal_apply a
   left join user_information b on a.user_basics_id=b.user_basics_id
  WHERE 1=1 
  and apply_status=#{apply_status,jdbcType=INTEGER}
  order by a.withdrawal_apply_id desc
  </select>
  <!--根据多ids查询提现审核信息表  -->
   <select id="findWithdrawalApplyToApplyIds" resultType="com.mrkb.dao.modle.apply.WithdrawalApplyEntity">
	SELECT
		*
		FROM withdrawal_apply
	WHERE apply_status = 1 and withdrawal_apply_id IN
	  <foreach collection="withdrawal_apply_ids" index="index" item="withdrawalApplyIds" open="(" separator="," close=")">
	    #{withdrawalApplyIds,jdbcType=INTEGER}
	  </foreach>
	</select>
	
</mapper>