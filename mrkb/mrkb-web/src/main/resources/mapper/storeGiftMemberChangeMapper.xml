<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mrkb.dao.dao.StoreGiftMemberChangeMapper">
 <!-- 新增赠送课程名额变更 -->
 <insert id="addStoreGiftMemberChange" parameterType="com.mrkb.dao.modle.store.StoreGiftMemberChangEntity" useGeneratedKeys="true" keyProperty="gift_member_id" >
  insert into store_gift_member_change
		(user_basics_id,gift_id,store_id,surplus_num,send_num,add_date,update_date) 
		value(
		 #{user_basics_id,jdbcType=INTEGER}
		,#{gift_id,jdbcType=INTEGER}
		,#{store_id,jdbcType=INTEGER}
		,#{surplus_num,jdbcType=INTEGER}
		,#{send_num,jdbcType=INTEGER}
		,#{add_date,jdbcType=BIGINT}
		,#{update_date,jdbcType=BIGINT}
		);
 </insert>
 <update id="updateStoreGiftMemberChange"  parameterType="com.mrkb.dao.modle.store.StoreGiftMemberChangEntity">
UPDATE store_gift_member_change 
SET 
surplus_num=surplus_num+(#{surplus_num,jdbcType=INTEGER}),
send_num=send_num+(#{send_num,jdbcType=INTEGER})
WHERE 1=1
and gift_member_id=#{gift_member_id,jdbcType=INTEGER};
</update>
<select id="findStoreGiftMemberChangeById" resultType="com.mrkb.dao.modle.store.StoreGiftMemberChangEntity" parameterType="com.mrkb.dao.modle.store.StoreGiftMemberChangEntity">
	select * from  store_gift_member_change  where 1=1 and
	 <if test="store_id!=null">
	  store_id = #{store_id,jdbcType=INTEGER} 
	 </if>
	 <if test="gift_member_id!=null">
	  gift_member_id = #{gift_member_id,jdbcType=INTEGER} 
	 </if>
	 <if test="gift_id!=null">
	  gift_id = #{gift_id,jdbcType=INTEGER} 
	 </if>
</select>

</mapper>
