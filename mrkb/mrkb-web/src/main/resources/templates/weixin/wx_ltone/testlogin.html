<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <script src="../../static/js/jquery.js" th:src="@{/js/jquery.js}" ></script>
    <title>麦迪夫的登陆页面</title>
    
	<script type="text/javascript">
	  function wait11(){
	
	  }
	  function wait(data){
	    if(data.ifSuccess==true){
	    alert("success");
	    
	    
	  }
	  //self.location="http://www.baidu.com";  
	  alert(data);
	  
	  
	  }
	  function test(){
	  var weixin_id=document.getElementById("weixin_id").value;
	      var weixin_portrait=document.getElementById("weixin_portrait").value;
	      var weixin_nickname=document.getElementById("weixin_nickname").value;
	      var weixin_gender=document.getElementById("weixin_gender").value;
	      var weixin_follow_choice=document.getElementById("weixin_follow_choice").value;
	      var weixin_follow_data_yes=document.getElementById("weixin_follow_data_yes").value;
	      var weixin_follow_data_no=document.getElementById("weixin_follow_data_no").value;
	      var user_register_data=document.getElementById("user_register_data").value;
	      var user_password=document.getElementById("user_password").value;
	      var user_register_address=document.getElementById("user_register_address").value;
	      var recommend_superior_winxin=document.getElementById("recommend_superior_winxin").value;
	  var paramData;
	  var paramData={weixin_id:weixin_id,weixin_portrait:weixin_portrait,weixin_nickname:weixin_nickname,weixin_gender:weixin_gender,weixin_follow_choice:weixin_follow_choice,weixin_follow_data_yes:weixin_follow_data_yes,weixin_follow_data_no:weixin_follow_data_no,user_register_data:user_register_data,user_password:user_password,user_register_address:user_register_address,recommend_superior_winxin:recommend_superior_winxin};                               
	  var object = JSON.stringify(paramData);
	  ajaxPost("http://www.szltvip.cn/morekaba/weixin/user_weixin/findUserWeixin",object,"json","json",wait);
	  }
	   function test1(){
	  var weixin_id=document.getElementById("weixin_id").value;
	      var weixin_portrait=document.getElementById("weixin_portrait").value;
	      var weixin_nickname=document.getElementById("weixin_nickname").value;
	      var weixin_gender=document.getElementById("weixin_gender").value;
	      var weixin_follow_choice=document.getElementById("weixin_follow_choice").value;
	      var weixin_follow_data_yes=document.getElementById("weixin_follow_data_yes").value;
	      var weixin_follow_data_no=document.getElementById("weixin_follow_data_no").value;
	      var user_register_data=document.getElementById("user_register_data").value;
	      var user_password=document.getElementById("user_password").value;
	      var user_register_address=document.getElementById("user_register_address").value;
	      var recommend_superior_winxin=document.getElementById("recommend_superior_winxin").value;
	  var paramData;
	  var paramData={weixin_id:weixin_id,weixin_portrait:weixin_portrait,weixin_nickname:weixin_nickname,weixin_gender:weixin_gender,weixin_follow_choice:weixin_follow_choice,weixin_follow_data_yes:weixin_follow_data_yes,weixin_follow_data_no:weixin_follow_data_no,user_register_data:user_register_data,user_password:user_password,user_register_address:user_register_address,recommend_superior_winxin:recommend_superior_winxin};                               
	  var object = JSON.stringify(paramData);
	  ajaxPost("http://www.szltvip.cn/morekaba/weixin/user_weixin/addUserBasic",object,"json","json",wait);
	  }
    </script>
  </head>
  
  <body>
  <div>
   <span>微信登陆/注册 测试<input type="button" onclick="test()" value="登陆/注册"></span><br>
  <!-- <span>微信/注册 测试<input type="button" onclick="test1()" value="登陆/注册"></span><br>-->
  <span>微信ID：<input id="weixin_id" type="text" name="weixin_id" value="" /></span><br>
  <span>微信头像：<input id="weixin_portrait" type="text" name="weixin_portrait" value="" /></span><br>
  <span>微信昵称：<input id="weixin_nickname" type="text" name="weixin_nickname" value="" /></span><br>  
  <span>微信性别：<input id="weixin_gender" type="text" name="weixin_gender" value="" /></span><br>   
  <span>是否关注：<input id="weixin_follow_choice" type="text" name="weixin_follow_choice" value="" /></span><br> 
  <span>关注时间：<input id="weixin_follow_data_yes" type="text" name="weixin_follow_data_yes" value="1513153399999" /></span><br> 
  <span>取消关注时间：<input id="weixin_follow_data_no" type="text" name="weixin_follow_data_no" value="1513153444888" /></span><br> 
  <span>注册时间：<input id="user_register_data" type="text" name="user_register_data" value="1513153344888" /></span><br> 
  <span>注册时间：<input id="user_password" type="text" name="user_password" value="" /></span><br>
  <span>注册地址：<input id="user_register_address" type="text" name="user_register_address" value="" /></span><br>
  <span>推荐人微信号：<input id="recommend_superior_winxin" type="text" name="recommend_superior_winxin" value="" /></span><br>
  </div>
<div>-----------------------------------------</div>
<script type="text/javascript">
function getAjax(url,resultType,functionName) {

		url = url ;

		//1.创建Ajax对象
		//js中,使用一个没有定义的变量会报错,使用一个没有定义的属性,是undefined
		//IE6下使用没有定义的XMLHttpRequest会报错,所以当做window的一个属性使用
		if (window.XMLHttpRequest) {
			//非IE6
			var ajax = new XMLHttpRequest();
		} else {
			//IE6
			var ajax = new ActiveXObject("Microsoft.XMLHTTP");
		}
		//2.连接到服务器
		ajax.open('GET', url, true);
		//3.发送请求
		ajax.send();
		//4.接收返回值
		ajax.onreadystatechange = function() {
			//0 － （未初始化）还没有调用send()方法  || (未初始化) 对象已建立，但是尚未初始化（尚未调用open方法） 
			//1 － （载入）已调用send()方法，正在发送请求  || (初始化) 对象已建立，尚未调用send方法 
			//2 － （载入完成）send()方法执行完成，已经接收到全部响应内容  || (发送数据) send方法已调用，但是当前的状态及http头未知 
			//　3 － （交互）正在解析响应内容  || (数据传送中) 已接收部分数据，因为响应及http头不全，
			//这时通过responseBody和responseText获取部分数据会出现错误， 
			//　4 － （完成）响应内容解析完成，可以在客户端调用了 || (完成) 数据接收完毕,此时可以通过通过
			//responseBody和responseText获取完整的回应数据 
			//oAjax.readyState--浏览器和服务器之间进行到哪一步了
			if (ajax.readyState == 4) { //读取完成

				if (ajax.status == 200) { //读取的结果是成功
                    var data=null;
                    if(resultType=="json"){
                    	data = JSON.parse(ajax.responseText);
                    }else{
                    	data=ajax.responseText;
                    }
                    
                    functionName(data);
				   

				} else {
					
				};
			};
		};
	}
function getAjaxSynchro(url,resultType,functionName) {

	url = url ;

	//1.创建Ajax对象
	//js中,使用一个没有定义的变量会报错,使用一个没有定义的属性,是undefined
	//IE6下使用没有定义的XMLHttpRequest会报错,所以当做window的一个属性使用
	if (window.XMLHttpRequest) {
		//非IE6
		var ajax = new XMLHttpRequest();
	} else {
		//IE6
		var ajax = new ActiveXObject("Microsoft.XMLHTTP");
	}
	//2.连接到服务器
	ajax.open('GET', url, false);
	//3.发送请求
	ajax.send();
	//4.接收返回值
	ajax.onreadystatechange = function() {
		//0 － （未初始化）还没有调用send()方法  || (未初始化) 对象已建立，但是尚未初始化（尚未调用open方法） 
		//1 － （载入）已调用send()方法，正在发送请求  || (初始化) 对象已建立，尚未调用send方法 
		//2 － （载入完成）send()方法执行完成，已经接收到全部响应内容  || (发送数据) send方法已调用，但是当前的状态及http头未知 
		//　3 － （交互）正在解析响应内容  || (数据传送中) 已接收部分数据，因为响应及http头不全，
		//这时通过responseBody和responseText获取部分数据会出现错误， 
		//　4 － （完成）响应内容解析完成，可以在客户端调用了 || (完成) 数据接收完毕,此时可以通过通过
		//responseBody和responseText获取完整的回应数据 
		//oAjax.readyState--浏览器和服务器之间进行到哪一步了
		if (ajax.readyState == 4) { //读取完成

			if (ajax.status == 200) { //读取的结果是成功
                var data=null;
                if(resultType=="json"){
                	data = JSON.parse(ajax.responseText);
                }else{
                	data=ajax.responseText;
                }
                
                functionName(data);
			   

			} else {
				
			};
		};
	};
}
function ajaxPost(url,paramData,paramType,resultType,functionname) {
	var resultdata;
	//1.创建Ajax对象
	if (window.XMLHttpRequest) {
		//非IE6
		var xhr = new XMLHttpRequest();
	} else {
		//IE6
		var xhr = new ActiveXObject("Microsoft.XMLHTTP");
	}
	//2.连接到服务器
	xhr.open('post',url, true);
	//设置头信息
	if(paramType='json'){
		paramType="application/json";
	}else{
		paramType="application/x-www-form-urlencoded";
	}
	xhr.setRequestHeader("Content-Type",paramType);
	//3.发送请求，传递数据
	if(paramData==null||paramData==""||paramData==undefined){
		xhr.send();
	}else{
		xhr.send(paramData);
	}
	
	xhr.onreadystatechange = function() {
		
		if (xhr.readyState == 4) {
			
			if (xhr.status ==200) {//返回正确
				if(xhr.getResponseHeader("DENIED")!=null){//拒绝访问
					alert(uitl_trim(xhr.getResponseHeader("DENIED")));
					return;
				};
				if(resultType=="json"){
				   resultdata = eval('(' + xhr.responseText + ')');
				   functionname(resultdata);
                 }else{
                	 resultdata=xhr.responseText;
                 }
				// alert(resultdata.carData);
			} else {//返回错误
				alert('登录超时,请重新登录!');
			//alert("error");
             //alert( xhr.responseText );
			}
		}
	};
	
}
function ajaxpost(url,paramData,paramType,resultType,functionname,functionparam) {
	var resultdata;
	//1.创建Ajax对象
	if (window.XMLHttpRequest) {
		//非IE6
		var xhr = new XMLHttpRequest();
	} else {
		//IE6
		var xhr = new ActiveXObject("Microsoft.XMLHTTP");
	}
	//2.连接到服务器
	xhr.open("POST", url, true);
	//设置头信息
	if(paramType='json'){
		paramType="application/json";
	}else{
		paramType="application/x-www-form-urlencoded";
	}
	xhr.setRequestHeader("Content-Type","application/json; charset=utf-8");
	//3.发送请求，传递数据
	if(paramData==null||paramData==""||paramData==undefined){
		//alert(paramData);
		xhr.send();
	}else{
		//alert(paramData);
		xhr.send(paramData);
	}
	xhr.onreadystatechange = function() {
		if (xhr.readyState == 4) {
			
			if (xhr.status ==200) {//返回正确
				 if(resultType=="json"){
				   resultdata = eval('(' + xhr.responseText + ')');
				   functionname(resultdata,functionparam);
                 }else{
                	 resultdata=xhr.responseText;
                 }
				// alert(resultdata.carData);
				return resultdata;
                 
			} else {//返回错误

			}
		}
	};
}
</script>
  </body>
</html>
