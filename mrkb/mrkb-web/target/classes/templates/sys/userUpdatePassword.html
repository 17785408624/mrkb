<html xmlns:th="http://www.thymeleaf.org">
<head>
<div th:replace="common/common :: common_resource"></div>
<meta charset="utf-8">
<title>修改密码</title>
<style type="text/css">
.uploader-list {
	margin-left: -15px;
}

.uploader-list .info {
	position: relative;
	margin-top: -25px;
	background-color: black;
	color: white;
	filter: alpha(Opacity = 80);
	-moz-opacity: 0.5;
	opacity: 0.5;
	width: 100px;
	height: 25px;
	text-align: center;
	display: none;
}

.uploader-list .handle {
	position: relative;
	background-color: black;
	color: white;
	filter: alpha(Opacity = 80);
	-moz-opacity: 0.5;
	opacity: 0.5;
	width: 100px;
	text-align: right;
	height: 18px;
	margin-bottom: -18px;
	display: none;
}

.uploader-list .handle span {
	margin-right: 5px;
}

.uploader-list .handle span:hover {
	cursor: pointer;
}

.uploader-list .file-iteme {
	margin: 12px 0 0 15px;
	padding: 1px;
	float: left;
}
</style>
</head>
<body>
	<div id="rapp">
		<div class="layui-card">
			<div class="layui-card-header">修改密码</div>
			<div class="layui-card-body" pad15="">

				<div class="layui-form" lay-filter="">
					<!--<div class="layui-form-item">
						<label class="layui-form-label">当前密码</label>
						<div class="layui-input-inline">
							<input type="password" name="oldPassword" lay-verify="required"
								lay-vertype="tips" class="layui-input">
						</div>
					</div>-->
					<div class="layui-form-item">
						<label class="layui-form-label">新密码</label>
						<div class="layui-input-inline">
							<input type="password" name="password" lay-verify="pass"
								lay-vertype="tips" autocomplete="off" class="layui-input">
						</div>
						<div class="layui-form-mid layui-word-aux">6到16个字符</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">确认新密码</label>
						<div class="layui-input-inline">
							<input type="password" name="repassword" lay-verify="repass"
								lay-vertype="tips" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-input-block">
							<button class="layui-btn" lay-submit="" lay-filter="setmypass"
								@click="updatePassword">确认修改</button>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>
	<script type="text/javascript">
		/* table.render({
		        elem: "#table_manage",
		        url: "/custUser/list",
		        page: true,
		        autoSort:false,
		        response:{statusCode:200},
		        initSort:{
		            field: 'id'
		            ,type: 'desc'
		          },done:function(res,curr,count){
		          // 隐藏列
		          $(".layui-table-box").find("[data-field='id']").css("display","none");
		 
		      }, */
		//初始化vue对象
		var vm = new Vue({
			el : "#rapp",
			data : {
				data : null,
				showList : true,
				title : null,
				user : {}
			},
			methods : {
				updatePassword : function() {
					vm.user = {};
					vm.showList = false;
					vm.title = "修改密码";
					debugger;
					var password = $("input[name='password']").val();
					var repassword = $("input[name='repassword']").val();
					$.ajax({
						type : "GET",
						url : basePath + "/sysUserMg/updatePassword/" + password + "/" + repassword,
						async : true,
						success : function(r) {
							layer.msg(r.message);
							window.location.history(-1);
						},
						error : function(r) {
							layer.msg(r.message);
							window.location.history(-1);
						}
					});
				},
			}
		});
	</script>
</body>
</html>
