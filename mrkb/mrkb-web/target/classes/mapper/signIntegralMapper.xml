<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mrkb.dao.dao.SignIntegralMapper">
 <!-- 新增签到 -->
  <insert id="addSignIntegral" parameterType="com.mrkb.dao.modle.integr.SignIntegralEntity" useGeneratedKeys="true" keyProperty="sign_id" >
  insert into sign_integral
		(user_basics_id,sign_num,sign_date) 
		value(
		 #{user_basics_id,jdbcType=INTEGER}
		,#{sign_num,jdbcType=INTEGER}
		,#{sign_date,jdbcType=INTEGER}
		);
 </insert>
 <!-- 查询所有签到信息记录-->
  <select id="findAllSignIntegral" resultType="com.mrkb.dao.modle.integr.SignIntegralEntity" parameterType="com.mrkb.dao.modle.integr.SignIntegralEntity">
         select *  from sign_integral where 1=1
         <if test="user_basics_id!=null">
            and user_basics_id= #{user_basics_id,jdbcType=INTEGER}
         </if>
          <!--<if test="sowing_mode!=null">
            and sowing_mode= #{sowing_mode,jdbcType=INTEGER}
         </if> -->
         order by sign_id ASC;
 </select> 
 <!-- 获取某一用户签到最大时间戳 -->
 <select id="findMaxTimeStamp" resultType ="com.mrkb.dao.modle.integr.SignIntegralEntity" parameterType="com.mrkb.dao.modle.integr.SignIntegralEntity">
      select max(sign_date) as sign_date  from  sign_integral where 1=1
        <if test="user_basics_id!=null">
            and user_basics_id= #{user_basics_id,jdbcType=INTEGER}
         </if>
 </select>
</mapper>