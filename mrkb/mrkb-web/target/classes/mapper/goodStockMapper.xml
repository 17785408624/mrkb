<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mrkb.dao.dao.GoodStockMapper">
   
   <!-- 新增货物 -->
   <insert id="addGoodsStock" parameterType="com.mrkb.dao.modle.stock.GoodsStock" useGeneratedKeys="true" keyProperty="goods_id">
		insert into goods_stock
		(goods_num,goods_name,add_date,status_state,user_basics_id)
		value (
		 #{goods_num,jdbcType=INTEGER}
		,#{goods_name,jdbcType=VARCHAR}
		,#{add_date,jdbcType=INTEGER}
		,#{status_state,jdbcType=INTEGER}
		,#{user_basics_id,jdbcType=INTEGER}
		);
	</insert>
	<!-- 新增入库 -->
   <insert id="addStoreStock" parameterType="com.mrkb.dao.modle.stock.StoreStock" useGeneratedKeys="true" keyProperty="stock_id">
		insert into store_stock
		(goods_id,store_num,add_date,user_basics_id)
		value (
		 #{goods_id,jdbcType=INTEGER}
		,#{store_num,jdbcType=INTEGER}
		,#{add_date,jdbcType=INTEGER}
		,#{user_basics_id,jdbcType=INTEGER}
		);
	</insert>
   
   
   <!-- 查询 -->
   <select id="findAllGoodsStock" resultType="com.mrkb.dao.modle.stock.GoodsStock" parameterType="com.mrkb.dao.modle.stock.GoodsStock">
      select goods_id,goods_num,goods_name,add_date,status_state,user_basics_id from goods_stock where 1=1
      <if test="goods_name!=null">
      and goods_name=#{goods_name,jdbcType=VARCHAR} 
      </if>
      <if test="add_date!=null">
      and add_date=#{add_date,jdbcType=INTEGER} 
      </if>
      <if test="user_basics_id!=null">
      and user_basics_id=#{user_basics_id,jdbcType=INTEGER} 
      </if>
      <if test="status_state!=null">
      and status_state=#{status_state,jdbcType=INTEGER} 
      </if>
    </select>
    
    
    <!-- 修改 -->
    <update id="updateGoodsStock" parameterType="com.mrkb.dao.modle.stock.GoodsStock">
         update goods_stock set goods_id=#{goods_id,jdbcType=INTEGER} 
         <if test="goods_num!=null">
         ,goods_num=goods_num+#{goods_num,jdbcType=INTEGER}  
         </if>
         <if test="goods_name !=null">
         ,goods_name=#{goods_name,jdbcType=VARCHAR} 
         </if>
         <if test="add_date!=null">
         ,add_date=#{add_date,jdbcType=INTEGER} 
         </if>
         <if test="status_state!=null">
         ,status_state=#{status_state,jdbcType=INTEGER} 
         </if>
         where 1=1 
         and goods_id=#{goods_id,jdbcType=INTEGER}
 	</update>
</mapper>